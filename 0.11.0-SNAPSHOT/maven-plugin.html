<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="The GraalVM team">
<title>Maven plugin for GraalVM Native Image</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta property="og:image" content="https://www.graalvm.org/resources/img/graalvm.png" />
<meta name="description" content="The Native Build Tools project provides plugins for different build tools to add support for building and testing native applications written in Java (or any other language compiled to JVM bytecode)."/>
<link rel="apple-touch-icon" sizes="180x180" href="https://www.graalvm.org/resources/img/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.graalvm.org/resources/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.graalvm.org/resources/img/favicon/favicon-16x16.png">

<section class="topscreen">
  <div class="wrapper">
      <div class="topscreen__body">
          <div class="topscreen__row">
            <div class="topscreen__content">
              <a class="graalvm-logo" href="https://graalvm.github.io/native-build-tools/">
                <img src="css/images/graalvm-logo.svg" alt="graalvm-icon">
              </a>
            </div>
            <div class="graalvm-rabbit">
              <img src="css/images/graalvm-rabbit-icon.svg" alt="graalvm-icon">
            </div>
          </div>
      </div>
  </div>
</section>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Maven plugin for GraalVM Native Image</h1>
<div class="details">
<span id="author" class="author">The GraalVM team</span><br>
<span id="revnumber">version 0.11.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#adding-the-plugin">Adding the Plugin</a></li>
<li><a href="#configuration-options">Plugin Configuration</a>
<ul class="sectlevel2">
<li><a href="#native-image-options">Native Image Options</a></li>
</ul>
</li>
<li><a href="#native-image-tracing-agent">Native Image Tracing Agent</a>
<ul class="sectlevel2">
<li><a href="#agent-support-enabling">Enabling the Agent</a></li>
<li><a href="#agent-support-configuring-options">Configuring the Agent</a></li>
<li><a href="#agent-support-running-tests">Running Tests with the Agent</a></li>
<li><a href="#agent-support-running-application">Running the Application with the Agent</a></li>
<li><a href="#agent-filter-file">Reducing the Amount of Generated Metadata</a></li>
<li><a href="#metadata-copy">Metadata Copy</a></li>
</ul>
</li>
<li><a href="#configuration-reusing-config-from-parent">Reusing Configuration from a Parent POM</a></li>
<li><a href="#testing-support">Testing Support</a>
<ul class="sectlevel2">
<li><a href="#testing-support-version-compatibility">Version Compatibility</a></li>
<li><a href="#testing-support-disabling">Disabling Testing Support</a></li>
</ul>
</li>
<li><a href="#metadata-support">GraalVM Reachability Metadata Support</a>
<ul class="sectlevel2">
<li><a href="#_configuring_the_metadata_repository">Configuring the Metadata Repository</a></li>
<li><a href="#_adding_metadata_repository_files">Adding Metadata Repository Files</a></li>
</ul>
</li>
<li><a href="#pgo-support">Profile-Guided Optimization</a></li>
<li><a href="#long_classpath_and_shading_support">Long classpath, @argument File and Shading Support</a></li>
<li><a href="#javadocs">Javadocs</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="https://github.com/graalvm/native-build-tools/actions/workflows/test-native-maven-plugin.yml/badge.svg" alt="badge"></span></p>
</div>
<div class="paragraph">
<p>The Maven plugin for GraalVM Native Image adds support for building and testing native images using <a href="https://maven.apache.org">Apache Maven</a>™.</p>
</div>
<div class="paragraph">
<p>Find the differences between the versions in the <a href="changelog.html">project changelog</a>.</p>
</div>
<div class="paragraph">
<p>You can find sample applications in the <a href="https://github.com/graalvm/native-build-tools/tree/master/samples">source repository</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-the-plugin"><a class="anchor" href="#adding-the-plugin"></a>Adding the Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Refer to the <a href="end-to-end-maven-guide.html">Getting Started Maven Guide</a> which provides step-by-step directions on adding the Maven plugin to your project, building your first native image, and running it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The plugin requires that you install a <a href="https://www.graalvm.org/downloads/">GraalVM JDK</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-options"><a class="anchor" href="#configuration-options"></a>Plugin Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="native-image-options"><a class="anchor" href="#native-image-options"></a>Native Image Options</h3>
<div class="paragraph">
<p>The plugin picks up all the configuration for your application stored below the <em>META-INF/native-image/</em> resource location, as described in
<a href="https://www.graalvm.org/reference-manual/native-image/BuildConfiguration/">Native Image Build Configuration</a>.
It is also possible to customize the plugin within the <code>&lt;configuration&gt;</code> block.
The following configuration options are available:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;mainClass&gt;</code></dt>
<dd>
<p>If the execution fails with the <code>no main manifest attribute, in target/&lt;name&gt;.jar</code>
error, the main class should be specified. By default the plugin consults several
locations in <em>pom.xml</em> in the following order to determine what the main class should be:</p>
<div class="ulist">
<ul>
<li>
<p><code>&lt;maven-shade-plugin&gt; &lt;transformers&gt; &lt;transformer&gt; &lt;mainClass&gt;</code></p>
</li>
<li>
<p><code>&lt;maven-assembly-plugin&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;</code></p>
</li>
<li>
<p><code>&lt;maven-jar-plugin&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>&lt;imageName&gt;</code></dt>
<dd>
<p>Use <code>&lt;imageName&gt;</code> to set a custom filename for the native image. If a custom
image name is not supplied, the artifact ID of the project will be used by default.</p>
</dd>
<dt class="hdlist1"><code>&lt;buildArgs&gt;</code></dt>
<dd>
<p>If you want to pass additional build options to <code>native-image</code>, use the <code>&lt;buildArgs&gt;</code> tag. You can pass any Native Image build option listed <a href="https://www.graalvm.org/reference-manual/native-image/overview/Options/">here</a>.</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;buildArgs&gt;
    &lt;buildArg&gt;--argument&lt;/buildArg&gt;
&lt;/buildArgs&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;skipNativeBuild&gt;</code></dt>
<dd>
<p>To skip generation of the native image, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;skipNativeBuild&gt;true&lt;/skipNativeBuild&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;skipNativeTests&gt;</code></dt>
<dd>
<p>To skip generation and execution of the native image compiled tests, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;skipNativeTests&gt;true&lt;/skipNativeTests&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;debug&gt;</code></dt>
<dd>
<p>If you want to enable generation of debugging information, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;debug&gt;true&lt;/debug&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;verbose&gt;</code></dt>
<dd>
<p>If you want to enable verbose output during the native image build, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;verbose&gt;true&lt;/verbose&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;sharedLibrary&gt;</code></dt>
<dd>
<p>If you want to build image as a shared library, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;sharedLibrary&gt;true&lt;/sharedLibrary&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;useArgFile&gt;</code></dt>
<dd>
<p>If you want to use the argument file for a native image building, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;useArgFile&gt;true&lt;/useArgFile&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;quickBuild&gt;</code></dt>
<dd>
<p>If you want to build a native image using <a href="https://www.graalvm.org/latest/reference-manual/native-image/overview/BuildOutput/#qbm-use-quick-build-mode-for-faster-builds">quick build mode</a>, add (alternatively, set the <code>GRAALVM_QUICK_BUILD</code> environment variable to <code>true</code>):</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;quickBuild&gt;true&lt;/quickBuild&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;excludeConfig&gt;</code></dt>
<dd>
<p>To exclude configuration from present JAR files, specify:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;excludeConfig&gt;
    &lt;entry&gt;
        &lt;jarPath&gt;dummy/path/to/file.jar&lt;/jarPath&gt;
        &lt;resourcePattern&gt;*&lt;/resourcePattern&gt;
    &lt;/entry&gt;
&lt;/excludeConfig&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;environment&gt;</code></dt>
<dd>
<p>To set environment options for a native image build, use:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;environment&gt;
    &lt;variable&gt;value&lt;/variable&gt;
&lt;/environment&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;systemPropertyVariables&gt;</code></dt>
<dd>
<p>To specify system properties used for a native image build, use:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;systemPropertyVariables&gt;
    &lt;propertyName&gt;value&lt;/propertyName&gt;
&lt;/systemPropertyVariables&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;runtimeArgs&gt;</code></dt>
<dd>
<p>To specify runtime arguments used for a native image run, use:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;runtimeArgs&gt;
    &lt;runtimeArg&gt;-XX:MissingRegistrationReportingMode=Warn&lt;/runtimeArg&gt;
&lt;/runtimeArgs&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This parameter is only valid for the Maven Goal of <code>test</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;jvmArgs&gt;</code></dt>
<dd>
<p>To specify JVM arguments used for a native image build, use:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;jvmArgs&gt;
    &lt;arg&gt;argument1&lt;/arg&gt;
    &lt;arg&gt;argument2&lt;/arg&gt;
&lt;/jvmArgs&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;classpath&gt;</code></dt>
<dd>
<p>Sets a custom classpath instead of the plugin generated one, use:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;classpath&gt;
    &lt;param&gt;path/to/file.jar&lt;/param&gt;
    &lt;param&gt;path/to/classes&lt;/param&gt;
&lt;/classpath&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;exclusions&gt;</code></dt>
<dd>
<p>This can be used to exclude artifacts from native-image compilation.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;exclusions&gt;
    &lt;exclusion&gt;
       &lt;groupId&gt;org.example&lt;/groupId&gt;
       &lt;artifactId&gt;example&lt;/artifactId&gt;
    &lt;/exclusion&gt;
&lt;/exclusions&gt;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;classesDirectory&gt;</code></dt>
<dd>
<p>   If you want to specify custom path to the JAR, or a custom directory that contains
only application classes, but you want the plugin to still automatically add classpath entries for
dependencies, add:</p>
</dd>
</dl>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;classesDirectory&gt;
    path/to/dir
&lt;/classesDirectory&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;agent&gt;</code></dt>
<dd>
<p>Configuration of the <a href="#agent-support">native agent</a>. See <a href="#agent-support-enabling">Enabling the Agent</a>
and <a href="#agent-support-configuring-options">Configuring the Agent</a> for details.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to build a native image named <code>myapp</code> that uses <code>org.example.ClassName</code> as its main class with assertions enabled, the <code>&lt;configuration&gt;</code> should look like this:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;configuration&gt;
  &lt;imageName&gt;myapp&lt;/imageName&gt;
  &lt;mainClass&gt;org.example.ClassName&lt;/mainClass&gt;
  &lt;fallback&gt;false&lt;/fallback&gt;
  &lt;verbose&gt;true&lt;/verbose&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Most of the aforementioned properties can also be set on the command line as a part of Maven invocation. For example, if you want to temporarily enable verbose mode, you can append <code>-Dverbose</code> to your Maven command.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="native-image-tracing-agent"><a class="anchor" href="#native-image-tracing-agent"></a>Native Image Tracing Agent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your project requires reflection, classpath resources, dynamic proxies or other
features requiring explicit native configuration, it may prove helpful to first run your
application or tests using the
<a href="https://www.graalvm.org/reference-manual/native-image/metadata/AutomaticMetadataCollection/">Native Image Tracing Agent</a>.</p>
</div>
<div class="paragraph">
<p>The Native Image Maven plugin simplifies generation of the required configuration files by injecting the agent automatically for you (this includes, but is not limited to the reflection configuration).</p>
</div>
<div class="paragraph">
<p>The agent generates the configuration file(s) under <em>target/native/agent-output</em>.
Although those files will be automatically used by <code>native-image</code>, you should consider reviewing the generated files and adding them to your sources instead.</p>
</div>
<div class="sect2">
<h3 id="agent-support-enabling"><a class="anchor" href="#agent-support-enabling"></a>Enabling the Agent</h3>
<div class="paragraph">
<p>The agent is disabled by default, but it can be enabled in the <em>pom.xml</em> file or on the command line.</p>
</div>
<div class="paragraph">
<p>To enable the agent by default, specify <code>&lt;enabled&gt;true&lt;/enabled&gt;</code> as follows in the configuration of <code>native-maven-plugin</code>:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;configuration&gt;
  &lt;agent&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
  &lt;/agent&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable the agent on the command line, pass the <code>-Dagent=true</code> option when running Maven.
The examples in the following sections demonstrate how to do this for your application and for tests.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you have enabled the agent in <em>pom.xml</em>, you can still disable it on the command line by passing <code>-Dagent=false</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="agent-support-configuring-options"><a class="anchor" href="#agent-support-configuring-options"></a>Configuring the Agent</h3>
<div class="paragraph">
<p>If you would like to configure the options for the agent&#8201;&#8212;&#8201;for example, to configure agent mode or advanced features such as
<a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/#caller-based-filters">Caller-based Filters</a>
and <a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/#access-filters">Access Filters</a>
- you can specify them in <em>pom.xml</em> as described bellow.</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;configuration&gt;
    &lt;agent&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;defaultMode&gt;Standard&lt;/defaultMode&gt;
        &lt;modes&gt;
            &lt;direct&gt;config-output-dir=${project.build.directory}/native/agent-output&lt;/direct&gt;
            &lt;conditional&gt;
                &lt;userCodeFilterPath&gt;user-code-filter.json&lt;/userCodeFilterPath&gt;
                &lt;extraFilterPath&gt;extra-filter.json&lt;/extraFilterPath&gt;
                &lt;parallel&gt;true&lt;/parallel&gt;
            &lt;/conditional&gt;
        &lt;/modes&gt;
        &lt;options&gt;
            &lt;callerFilterFiles&gt;
                &lt;filterFile&gt;caller-filter-file1.json&lt;/filterFile&gt;
                &lt;filterFile&gt;caller-filter-file2.json&lt;/filterFile&gt;
            &lt;/callerFilterFiles&gt;
            &lt;accessFilterFiles&gt;
                &lt;filterFile&gt;access-filter-file1.json&lt;/filterFile&gt;
                &lt;filterFile&gt;access-filter-file2.json&lt;/filterFile&gt;
            &lt;/accessFilterFiles&gt;
            &lt;builtinCallerFilter&gt;true&lt;/builtinCallerFilter&gt;
            &lt;builtinHeuristicFilter&gt;true&lt;/builtinHeuristicFilter&gt;
            &lt;enableExperimentalPredefinedClasses&gt;true&lt;/enableExperimentalPredefinedClasses&gt;
            &lt;enableExperimentalUnsafeAllocationTracing&gt;
                true
            &lt;/enableExperimentalUnsafeAllocationTracing&gt;
            &lt;trackReflectionMetadata&gt;true&lt;/trackReflectionMetadata&gt;
        &lt;/options&gt;
        &lt;metadataCopy&gt;
            &lt;!-- you can specify metadataCopy configuration here --&gt;
        &lt;/metadataCopy&gt;
    &lt;/agent&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example shows all possibilities you can use for the agent configuration.
If you do not need some of the options, just remove them.</p>
</div>
<div class="paragraph">
<p>Agent can be run in one of the following modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>standard</code> - in this mode you run agent only with options provided in the <code>options</code> section.</p>
</li>
<li>
<p><code>direct</code> - in this mode you can provide command line options for the agent. In this
mode, a user is fully responsible for agent configuration, and the rest of the agent configuration, provided in <em>pom.xml</em> file, will be ignored.</p>
</li>
<li>
<p><code>conditional</code> - in this mode you can provide additional files that can be used as a filter for the agent output. Read more about conditional mode <a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/ExperimentalAgentOptions/">here</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an explanation for each option you can specify in the agent block:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code> - Specifies whether the agent is enabled or not. Can be set to <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p><code>defaultMode</code> - Agent mode switcher. Can be set to: <code>standard</code>, <code>direct</code>, or <code>conditional</code>.</p>
</li>
<li>
<p><code>modes</code> - A list of additional mode options, specific for certain mode type. Inside this tag, you can specify options for
direct or conditional modes. Standard mode does not have any specific options.</p>
<div class="ulist">
<ul>
<li>
<p>in case of <code>direct</code> mode, you can specify <code>&lt;direct&gt;</code> tag, with the agent command line as its value</p>
</li>
<li>
<p>in case of <code>conditional</code> mode, you can specify <code>&lt;conditional&gt;</code> tag, and set additional <a href="https://github.com/oracle/graalvm-reachability-metadata/blob/master/docs/CollectingMetadata.md">filter files</a> inside <code>&lt;userCodeFilterPath&gt;</code> and <code>&lt;extraCodeFilterPath&gt;</code>. Also, you can set value for <code>&lt;parallel&gt;</code> tag. If the value is <code>true</code>, the agent will create the <em>partial-config</em> file, and merge it with conditional merge. Otherwise the agent will generate the same kind of output as other modes.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>options</code> - A list of options that can be specified independently from the agent mode. Learn more about these options <a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/">here</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="agent-support-running-tests"><a class="anchor" href="#agent-support-running-tests"></a>Running Tests with the Agent</h3>
<div class="paragraph">
<p>The simplest way to use the agent is to do it via execution of your tests.</p>
</div>
<div class="paragraph">
<p>Run your test suite with:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw -Pnative -Dagent=true test</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the <code>agent</code> system property is set to <code>true</code> (or when the agent is <a href="#agent-support-enabling">enabled in the POM</a>), the agent will be automatically attached to your Maven Surefire test execution, and the generated files will be stored in the <em>target/native/agent-output/test</em> directory.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to run the <em>metadataCopy</em> task as well, first define its configuration as described <a href="#metadata-copy">above</a>, and add <code>native:metadata-copy</code>
at the end of the agent invocation command. For example:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw -Pnative -Dagent=true test native:metadata-copy</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="agent-support-running-application"><a class="anchor" href="#agent-support-running-application"></a>Running the Application with the Agent</h3>
<div class="paragraph">
<p>Executing your application with the agent is more involved and requires you to configure a separate Mojo execution which allows forking the Java process.</p>
</div>
<div class="paragraph">
<p>In your <code>native</code> profile section, add the following:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;java-agent&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;exec&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;test&lt;/phase&gt;
            &lt;configuration&gt;
                &lt;executable&gt;java&lt;/executable&gt;
                &lt;workingDirectory&gt;${project.build.directory}&lt;/workingDirectory&gt;
                &lt;arguments&gt;
                    &lt;argument&gt;-classpath&lt;/argument&gt;
                    &lt;classpath/&gt;
                    &lt;argument&gt;${mainClass}&lt;/argument&gt;
                &lt;/arguments&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;java-agent&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;exec&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;test&lt;/phase&gt;
            &lt;configuration&gt;
                &lt;executable&gt;java&lt;/executable&gt;
                &lt;workingDirectory&gt;${project.build.directory}&lt;/workingDirectory&gt;
                &lt;arguments&gt;
                    &lt;argument&gt;-classpath&lt;/argument&gt;
                    &lt;classpath/&gt;
                    &lt;argument&gt;${mainClass}&lt;/argument&gt;
                &lt;/arguments&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can execute your application with the agent by running:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw -Pnative -Dagent=true -DskipTests -DskipNativeBuild=true package exec:exec@java-agent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both of the above commands generate configuration files in the <em>target/native/agent-output/main</em> directory.
If you want to run your native application with those configuration files, you then need to execute the following command:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw -Pnative -Dagent=true -DskipTests package exec:exec@native</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="agent-filter-file"><a class="anchor" href="#agent-filter-file"></a>Reducing the Amount of Generated Metadata</h3>
<div class="paragraph">
<p>In some cases the agent may include more metadata than it is actually needed.
You can filter metadata using the agent filter file(s).
These filter files that agent consumes have the following structure:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
 "rules": [
    {"includeClasses": "some.class.to.include.**"},
    {"excludeClasses": "some.class.to.exclude.**"},
  ],
  "regexRules": [
    {"includeClasses": "regex\.example\.class.*"},
    {"excludeClasses": "regex\.example\.exclude[0-9]+"},
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The process how you can pass the configuration files to the agent is described in the <a href="#agent-support-configuring-options">previous section</a>.</p>
</div>
<div class="paragraph">
<p>You can see on some simple Java application how different filter files affect generated metadata.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with this filter:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
  "rules": [
    {"includeClasses": "**"}
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This filter instructs the agent to include everything, which will result in a massive configuration file.
For example, this is how <em>reachability-metadata.json</em> looks like:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
  "reflection": [
    {
      "condition": {
        "typeReached": "java.util.concurrent.atomic.AtomicBoolean"
      },
      "type": "java.util.concurrent.atomic.AtomicBoolean",
      "fields": [
        {
          "name": "value"
        }
      ]
    },
    {
      "condition": {
        "typeReached": "org.apache.maven.surefire.booter.ForkedBooter"
      },
      "type": "org.apache.maven.surefire.booter.spi.LegacyMasterProcessChannelProcessorFactory"
    },
    {
      "condition": {
        "typeReached": "org.apache.maven.surefire.booter.ForkedBooter"
      },
      "type": "org.apache.maven.surefire.booter.spi.SurefireMasterProcessChannelProcessorFactory"
    },
    {
      "condition": {
        "typeReached": "org.junit.platform.launcher.core.DefaultLauncher"
      },
      "type": "org.apiguardian.api.API"
    },
    {
      "condition": {
        "typeReached": "java.lang.Class"
      },
      "type": "org.example.NativeTests"
    },
    {
      "condition": {
        "typeReached": "java.util.Collections$2"
      },
      "type": "org.example.NativeTests"
    },
    {
      "condition": {
        "typeReached": "org.apache.maven.surefire.api.util.DefaultScanResult"
      },
      "type": "org.example.NativeTests"
    },
    {
      "condition": {
        "typeReached": "org.junit.jupiter.engine.JupiterTestEngine"
      },
      "type": "org.example.NativeTests"
    },
    {
      "condition": {
        "typeReached": "org.junit.jupiter.engine.discovery.ClassSelectorResolver$$Lambda/0x00007a5c0f03fbb8"
      },
      "type": "org.example.NativeTests"
    },
    {
      "condition": {
        "typeReached": "java.security.Provider$Service"
      },
      "type": "sun.security.provider.SHA",
      "methods": [
        {
          "name": "&lt;init&gt;",
          "parameterTypes": []
        }
      ]
    }
    ...
  ],
  "resources": [
    {
      "condition": {
        "typeReached": "jdk.internal.logger.BootstrapLogger$DetectBackend$1"
      },
      "glob": "META-INF/services/java.lang.System$LoggerFinder"
    },
    {
      "condition": {
        "typeReached": "jdk.internal.logger.LoggerFinderLoader"
      },
      "glob": "META-INF/services/java.lang.System$LoggerFinder"
    },
    {
      "condition": {
        "typeReached": "org.apache.maven.surefire.booter.ForkedBooter"
      },
      "glob": "META-INF/services/org.apache.maven.surefire.spi.MasterProcessChannelProcessorFactory"
    },
    {
      "condition": {
        "typeReached": "java.lang.ClassLoader"
      },
      "glob": "TestResource.txt"
    },
    ...
  ],
  "bundles": [],
  "jni": [
    {
      "condition": {
        "typeReached": "sun.nio.ch.IOUtil"
      },
      "type": "java.lang.Boolean",
      "methods": [
        {
          "name": "getBoolean",
          "parameterTypes": [
            "java.lang.String"
          ]
        }
      ]
    },
    {
      "condition": {
        "typeReached": "sun.management.VMManagementImpl"
      },
      "type": "sun.management.VMManagementImpl",
      "fields": [
        {
          "name": "compTimeMonitoringSupport"
        },
        {
          "name": "currentThreadCpuTimeSupport"
        },
        {
          "name": "objectMonitorUsageSupport"
        },
        {
          "name": "otherThreadCpuTimeSupport"
        },
        {
          "name": "remoteDiagnosticCommandsSupport"
        },
        {
          "name": "synchronizerUsageSupport"
        },
        {
          "name": "threadAllocatedMemorySupport"
        },
        {
          "name": "threadContentionMonitoringSupport"
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, there are lots of entries that you likely do not want.
They are present because the metadata was generated using tests, and that the testing library was present at run time during the agent execution pass, but in practice, your application will not use the testing library in production.
To reduce the amount of generated metadata, use the following <em>user-code-filter.json</em>:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
  "rules": [
    {"includeClasses": "**"},
    {"excludeClasses": "org.apache.maven.**"},
    {"excludeClasses": "org.junit.**"},
    {"excludeClasses": "java.**"},
    {"excludeClasses": "jdk.internal.**"},
    {"excludeClasses": "sun.**"},
    {"excludeClasses": "com.sun.**"}
  ]
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Always be careful when removing entries in metadata, as this may result in a broken native image.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After updating the filter, you can regenerate the metadata, which will result in the following <em>reachability-metadata.json</em> file:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
  "reflection": [
    {
      "condition": {
        "typeReached": "org.example.NativeTests"
      },
      "type": "org.example.NativeTests$Person",
      "allDeclaredFields": true
    }
  ],
  "resources": [
    {
      "condition": {
        "typeReached": "org.example.NativeTests"
      },
      "glob": "TestResource.txt"
    }
  ],
  "bundles": []
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, there are no more entries that contain classes from <code>org.apache.maven</code> (as their condition).</p>
</div>
</div>
<div class="sect2">
<h3 id="metadata-copy"><a class="anchor" href="#metadata-copy"></a>Metadata Copy</h3>
<div class="paragraph">
<p>The <code>metadataCopy</code> task provides additional options for manipulating the agent output after it finishes its job.</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataCopy&gt;
    &lt;disabledStages&gt;
        &lt;stage&gt;main&lt;/stage&gt;
    &lt;/disabledStages&gt;
    &lt;merge&gt;true&lt;/merge&gt;
    &lt;outputDirectory&gt;/tmp/test-output-dir&lt;/outputDirectory&gt;
&lt;/metadataCopy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set values for the following tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;outputDirectory&gt;</code> - where you want to copy agent output.</p>
</li>
<li>
<p><code>&lt;merge&gt;</code> - in case you already have some other configuration files inside output directory, you can choose whether you want to override those files or
merge new files with the existing once (set <code>merge</code> to <code>true</code>).</p>
</li>
<li>
<p><code>&lt;disabledStages&gt;</code> - in case you do not want to copy output of the certain stage (main or test), you can disable them, and <code>metadataCopy</code> will not look at
the agent output for that stage. For example, if you want to copy only configuration files generated in tests, you can disable main stage. Also, if you want to copy only files generated in the main phase, you can disable the test stage. Therefore, if you skip both stages, <code>metadataCopy</code> will not be executed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reusing-config-from-parent"><a class="anchor" href="#configuration-reusing-config-from-parent"></a>Reusing Configuration from a Parent POM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>&lt;buildArgs&gt;</code> element can be combined between parent and children POMs.
Suppose you have the following parent POM definition:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
  &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
  &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${current_plugin_version}&lt;/version&gt;
  &lt;configuration&gt;
    &lt;imageName&gt;${project.artifactId}&lt;/imageName&gt;
    &lt;mainClass&gt;${exec.mainClass}&lt;/mainClass&gt;
    &lt;buildArgs&gt;
      &lt;buildArg&gt;--no-fallback&lt;/buildArg&gt;
    &lt;/buildArgs&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Children projects have the ability to append <code>&lt;buildArg&gt;</code> arguments in the following way:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
  &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
  &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;buildArgs combine.children="append"&gt;
      &lt;buildArg&gt;--verbose&lt;/buildArg&gt;
    &lt;/buildArgs&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the arguments that are passed to the <code>native-image</code> executable will be:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">--no-fallback --verbose</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-support"><a class="anchor" href="#testing-support"></a>Testing Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This plugin supports running tests on the <a href="https://junit.org/junit5/docs/current/user-guide/">JUnit Platform</a> as native images.
This means that tests will be compiled and executed as native code.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The minimum supported version is JUnit 5.8.1 (JUnit Platform 1.8.1, JUnit Jupiter 5.8.1, JUnit Vintage 5.8.1).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In theory, any <code>TestEngine</code> supported on the JUnit Platform should be supported by the plugin as long as the programming language used by the <code>TestEngine</code> and the programming language used to write the tests is supported by GraalVM Native Image.
The plugin provides explicit support for the JUnit Jupiter and JUnit Vintage test engines, and support for additional test engines should be possible with custom native configuration.</p>
</div>
<div class="paragraph">
<p>To use the recommended JUnit Platform test listener mode, you need to enable extensions for <code>native-maven-plugin</code> by adding <code>&lt;extensions&gt;true&lt;/extensions&gt;</code> as follows.</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${native.maven.plugin.version}&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the <code>./mvnw -Pnative test</code> will then build and run tests as native code.</p>
</div>
<div class="sect2">
<h3 id="testing-support-version-compatibility"><a class="anchor" href="#testing-support-version-compatibility"></a>Version Compatibility</h3>
<div class="paragraph">
<p>This plugin requires the Maven Surefire plugin 3.0.0 or higher to run tests as native code.</p>
</div>
<div class="paragraph">
<p>Each version of the Maven Surefire plugin has a dependency on a particular version of the JUnit Platform.
You therefore need to ensure that Maven Surefire is using at least version 1.8 of the JUnit Platform.
Beginning with version 3.0 M4, Maven Surefire automatically aligns the JUnit Platform version used by Surefire with the version needed by the user&#8217;s configured version of JUnit Jupiter or JUnit Vintage.
Since the examples here use Maven Surefire 3.0 M5, their maven POMs do not require any special configuration regarding the JUnit Platform version.
However, if you are using a version of Maven Surefire prior to 3.0 M4, you will need to add an explicit dependency on the <code>junit-platform-launcher</code> artifact to the <code>dependencies</code> section of your <code>native</code> profile configuration. For example:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.junit.platform&lt;/groupId&gt;
		&lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;
		&lt;version&gt;1.8.2&lt;/version&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you import the <code>junit</code> BOM or are using a plugin that manages JUnit
versions for you&#8201;&#8212;&#8201;for example, Spring Boot&#8201;&#8212;&#8201;you may want to omit the <code>&lt;version&gt;</code>
configuration in the above example.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If Maven Surefire is using an older version of the JUnit Platform, the build will fail with an error similar to the following when attempting to run tests in a native image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[ERROR] Test configuration file wasn't found. Make sure that test execution wasn't skipped.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="testing-support-disabling"><a class="anchor" href="#testing-support-disabling"></a>Disabling Testing Support</h3>
<div class="paragraph">
<p>If you wish to disable running tests on the JVM as well as tests as native code, you can invoke Maven with the <code>-DskipTests</code> flag.
This flag is supported by Maven Surefire and Native Build Tools.
Several examples in <a href="#agent-support-running-application">Running the Application with the Agent</a> demonstrate the use of this flag.</p>
</div>
<div class="paragraph">
<p>If you wish to run tests on the JVM with Maven Surefire but skip running tests as native code, you can invoke Maven with the <code>-DskipNativeTests</code> flag.
This flag is specific to Native Build Tools.
For example, you might wish to disable only native testing support for use cases such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You do not actually want to run your tests as native code.</p>
</li>
<li>
<p>Your library or application uses a testing framework that is not supported on the JUnit Platform.</p>
</li>
<li>
<p>You need to use the <a href="#agent-support">agent</a> when running tests on the JVM but do not wish to run those same tests as native code.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metadata-support"><a class="anchor" href="#metadata-support"></a>GraalVM Reachability Metadata Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin adds support for the <a href="https://github.com/oracle/graalvm-reachability-metadata/">GraalVM Reachability Metadata Repository</a>.
This repository provides the <a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/">configuration</a> for libraries that do not support GraalVM Native Image.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The repository is also published on Maven Central at the following coordinates:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
   &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
    &lt;artifactId&gt;graalvm-reachability-metadata&lt;/artifactId&gt;
    &lt;version&gt;{maven-plugin-version}&lt;/version&gt;
    &lt;classifier&gt;repository&lt;/classifier&gt;
    &lt;type&gt;zip&lt;/type&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example: <code>graalvm-reachability-metadata-0.11.0-SNAPSHOT-repository.zip</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_configuring_the_metadata_repository"><a class="anchor" href="#_configuring_the_metadata_repository"></a>Configuring the Metadata Repository</h3>
<div class="paragraph">
<p>The plugin automatically downloads the configuration metadata from the official repository if you supply the version of the repository you want to use.</p>
</div>
<div class="paragraph">
<p>The support is enabled by default, but can be disabled explicitly:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;false&lt;/enabled&gt;
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use a <em>remote repository</em>, in which case you can specify the URL of the ZIP file:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;url&gt;${metadata.url}&lt;/url&gt;
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For debugging purposes you can use a local repository:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;localPath&gt;${project.basedir}/config-directory&lt;/localPath&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For each library included in the native image, the plugin will automatically search for GraalVM image build configuration metadata in the repository that was released together with the plugin.</p>
</div>
<div class="paragraph">
<p>For each library dependency, the plugin automatically searches for the configuration metadata in the repository.
In some cases, you may want to override the repository version:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;version&gt;0.2.3&lt;/version&gt;
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may want to exclude a particular module from the search.
This can be done by configuring that particular dependency:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;localPath&gt;${project.basedir}/config-directory&lt;/localPath&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.graalvm.internal&lt;/groupId&gt;
            &lt;artifactId&gt;library-with-reflection&lt;/artifactId&gt;
            &lt;excluded&gt;true&lt;/excluded&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lastly, it is possible for you to override the <em>metadata version</em> of a particular module.
This may be interesting if there is no specific metadata available for the particular version of the library that you use, but that you know that a version works:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;metadataRepository&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;localPath&gt;${project.basedir}/config-directory&lt;/localPath&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.graalvm.internal&lt;/groupId&gt;
            &lt;artifactId&gt;library-with-reflection&lt;/artifactId&gt;
            &lt;metadataVersion&gt;2&lt;/metadataVersion&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/metadataRepository&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_metadata_repository_files"><a class="anchor" href="#_adding_metadata_repository_files"></a>Adding Metadata Repository Files</h3>
<div class="paragraph">
<p>By default, reachability metadata is used only when your native image is being generated.
In some situations, you may want to include the metadata directly inside your JAR file.</p>
</div>
<div class="paragraph">
<p>Copying the reachability metadata into the application JAR can be useful when some other process is responsible for converting your JAR into a native image.
For example, you might be generating a shaded JAR file and using a <a href="https://paketo.io/">Paketo buildpack</a> to convert it to a native image.</p>
</div>
<div class="paragraph">
<p>To include metadata repository inside the JAR file, you can use the <code>add-reachability-metadata</code> goal.
Typically, the goal will be included in an execution step where, by default, it will be bound to the <code>generate-resources</code> phase:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;add-reachability-metadata&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;add-reachability-metadata&lt;/goal&gt;
        &lt;/goals&gt;
    &lt;/execution&gt;
&lt;/executions&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pgo-support"><a class="anchor" href="#pgo-support"></a>Profile-Guided Optimization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin supports building optimized images with <a href="https://www.graalvm.org/latest/reference-manual/native-image/optimizations-and-performance/PGO/">Profile-Guided Optimization (PGO)</a> to improve performance and throughput.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>PGO is available in Oracle GraalVM.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The PGO workflow includes three steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, generate a native image with instrumentation enabled.</p>
</li>
<li>
<p>Next, run the image to gather profiling information.</p>
</li>
<li>
<p>Then, create an optimized native image based on the profiles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To generate a binary with instrumentation enabled, pass the <code>--pgo-instrument</code> option to <code>native-image</code> using <code>&lt;buildArg&gt;</code>, and run the build command <code>./mvnw -Pnative package</code>.
To prevent overwriting a previously built native executable, we recommend either creating a separate Maven profile for each build or specifying a unique file name using the <code>&lt;imageName&gt;</code> tag:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;configuration&gt;
  &lt;imageName&gt;instrumentedApp&lt;/imageName&gt;
  &lt;buildArgs&gt;
      &lt;buildArg&gt;--pgo-instrument&lt;/buildArg&gt;
  &lt;/buildArgs&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, gather execution profiles by running the instrumented executable:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./target/instrumentedApp</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the <em>default.iprof</em> file, if not specified otherwise, is generated alongside the native executable once the application is stopped.</p>
</div>
<div class="paragraph">
<p>Lastly, build an optimized native image with profiles by passing the <code>--pgo</code> option in the plugin configuration:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;configuration&gt;
  &lt;imageName&gt;optimizedApp&lt;/imageName&gt;
  &lt;buildArgs&gt;
      &lt;buildArg&gt;--pgo&lt;/buildArg&gt;
  &lt;/buildArgs&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the profile file has the default name and location, it will be automatically used.
Alternatively, you can specify the file path as following: <code>--pgo=myprofile.iprof</code>.
If everything was done properly, you will see <em>"PGO: user-provided"</em> in the native image build output.</p>
</div>
<div class="paragraph">
<p>It is possible to include more than one profile, in which case you should rename the <em>.iprof</em> files.
Learn more about PGO <a href="https://www.graalvm.org/reference-manual/native-image/optimizations-and-performance/PGO/basic-usage">on the website</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="long_classpath_and_shading_support"><a class="anchor" href="#long_classpath_and_shading_support"></a>Long classpath, @argument File and Shading Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Under Windows, <a href="https://github.com/graalvm/native-build-tools/issues/85">it is possible that the length of the classpath exceeds what the operating system supports</a> when invoking the CLI to build a native image.</p>
</div>
<div class="paragraph">
<p>The plugin automatically passes arguments to the <code>native-image</code> tool from the argument file, instead of passing them directly.</p>
</div>
<div class="paragraph">
<p>There is also the <code>native:write-args-file</code> goal that can be used to generate this argument file.
This can be useful in situations where <code>native-maven-plugin</code> is not available, for example, when running <code>native-image</code> in a Docker container.
The path to the arguments file is stored in the project properties under the key <code>graalvm.native-image.args-file</code>, so that other Maven plugins further in the lifecycle can use it.</p>
</div>
<div class="paragraph">
<p>In case you are using a GraalVM version older than 21.3, you will however have to use a workaround, since the argument file wasn&#8217;t supported.</p>
</div>
<div class="paragraph">
<p>One option is to use a <a href="https://maven.apache.org/plugins/maven-shade-plugin">shaded JAR</a> and use it instead of individual JAR files on classpath.
For that, you need to setup the <a href="https://maven.apache.org/plugins/maven-shade-plugin">Maven Shade plugin</a>:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2.4&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need the testing support, add the JUnit Platform dependency explicitly:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
        &lt;artifactId&gt;junit-platform-native&lt;/artifactId&gt;
        &lt;version&gt;${junit.platform.native.version}&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>native-maven-plugin</code> needs to be configured to use this JAR instead of the full classpath:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${native.maven.plugin.version}&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;build-native&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;compile-no-fork&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;package&lt;/phase&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;skip&gt;false&lt;/skip&gt;
        &lt;useArgFile&gt;false&lt;/useArgFile&gt;
        &lt;imageName&gt;${imageName}&lt;/imageName&gt;
        &lt;fallback&gt;false&lt;/fallback&gt;
        &lt;classpath&gt;
            &lt;param&gt;${project.build.directory}/${project.artifactId}-${project.version}-shaded.jar&lt;/param&gt;
        &lt;/classpath&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the other plugins your build uses (typically the Spring Boot plugin), you might have to configure, in addition, the main class:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
	&lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
	&lt;version&gt;${native.buildtools.version}&lt;/version&gt;
	&lt;configuration&gt;
		&lt;imageName&gt;${project.artifactId}&lt;/imageName&gt;
		&lt;mainClass&gt;${exec.mainClass}&lt;/mainClass&gt;
		&lt;buildArgs&gt;
			&lt;buildArg&gt;--no-fallback&lt;/buildArg&gt;
		&lt;/buildArgs&gt;
		&lt;classpath&gt;
			&lt;param&gt;
				${project.build.directory}/${project.artifactId}-${project.version}-shaded.jar
			&lt;/param&gt;
		&lt;/classpath&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To be able to <a href="#testing-support">execute tests as native code</a>, you also need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a <em>src/assembly/test-jar-with-dependencies.xml</em> file with the following contents:</p>
</li>
</ul>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd"&gt;
    &lt;id&gt;tests&lt;/id&gt;
    &lt;formats&gt;
        &lt;format&gt;jar&lt;/format&gt;
    &lt;/formats&gt;
    &lt;fileSets&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;${project.build.directory}/test-classes&lt;/directory&gt;
            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;
        &lt;/fileSet&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;${project.build.outputDirectory}&lt;/directory&gt;
            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;
        &lt;/fileSet&gt;
    &lt;/fileSets&gt;
    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;
    &lt;dependencySets&gt;
        &lt;dependencySet&gt;
            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;
            &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;
            &lt;unpack&gt;true&lt;/unpack&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependencySet&gt;
    &lt;/dependencySets&gt;
&lt;/assembly&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the Maven Assembly plugin to your <code>native</code> profile:</p>
</li>
</ul>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.4.1&lt;/version&gt;
    &lt;configuration&gt;
        &lt;descriptors&gt;
            &lt;descriptor&gt;src/assembly/test-jar-with-dependencies.xml&lt;/descriptor&gt;
        &lt;/descriptors&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-test-jar&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;single&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Due to a limitation in Maven, you need to move the tests execution to the <code>integration-test</code> phase:</p>
</li>
</ul>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.0.0-M5&lt;/version&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${native.maven.plugin.version}&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;test-native&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;test&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;integration-test&lt;/phase&gt;
            &lt;configuration&gt;
                &lt;classpath&gt;
                    &lt;param&gt;${project.build.directory}/${project.artifactId}-${project.version}-tests.jar&lt;/param&gt;
                &lt;/classpath&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;build-native&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;compile-no-fork&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;configuration&gt;
                &lt;classpath&gt;
                    &lt;param&gt;${project.build.directory}/${project.artifactId}-${project.version}-shaded.jar&lt;/param&gt;
                &lt;/classpath&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;skip&gt;false&lt;/skip&gt;
        &lt;useArgFile&gt;false&lt;/useArgFile&gt;
        &lt;imageName&gt;${imageName}&lt;/imageName&gt;
        &lt;fallback&gt;false&lt;/fallback&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you need to execute tests using the <code>integration-test</code> phase instead of <code>test</code>:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw -Pnative integration-test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the <a href="https://maven.apache.org/plugins/maven-shade-plugin">Maven Shade plugin documentation</a> for more details on how to configure shading, and the <a href="https://maven.apache.org/plugins/maven-assembly-plugin">Maven Assembly plugin documentation</a> to tweak what to include in tests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="javadocs"><a class="anchor" href="#javadocs"></a>Javadocs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For further reference, you can review the <a href="javadocs/native-maven-plugin/index.html">Javadocs of the plugin</a>.</p>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="highlight/styles/equilibrium-light.min.css">
<script src="highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<link rel="stylesheet" href="css/multi-lang-sample.css">
<link rel="stylesheet" href="css/page.css">
<link rel="stylesheet" href="css/typography.css">
<link rel="stylesheet" href="css/footer.css">
<script src="js/multi-lang-sample.js"></script>
<div id="footer">
    <div class="foot-container">
      <div class="foot-content">
        <div id="footer-text">
          <h5>Copyright © 2025. Licensed under the Universal Permissive License (UPL), Version 1.0 </h5>
        </div>
      </div>
    </div>
</div>
</body>
</html>