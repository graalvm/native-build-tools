plugins {
    id 'java-library'
    id 'checkstyle'
    id 'maven-publish'
}

compileJava {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
}

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    compileOnly group: 'org.graalvm.nativeimage', name: 'svm', version: org_graalvm_version
    implementation group: 'org.junit.platform', name: 'junit-platform-console', version: junit_platform_version
    implementation group: 'org.junit.platform', name: 'junit-platform-launcher', version: junit_platform_version
    implementation group: 'org.junit.jupiter', name: 'junit-jupiter', version: junit_jupiter_version
    testImplementation(platform('org.junit:junit-bom:' + junit_jupiter_version))
    testImplementation('org.junit.jupiter:junit-jupiter')
}

apply from: "gradle/native-image-testing.gradle"

clean.doLast {
    delete "${buildDir}/*"
}

test {
    useJUnitPlatform()
}

tasks.withType(Test) {
    testLogging {
        events "standardOut", "passed", "skipped", "failed"
    }
}

group = 'org.graalvm.buildtools'
version = junit_platform_native_version

publishing {
    publications {
        //noinspection GroovyAssignabilityCheck
        maven(MavenPublication) {
            from components.java
        }
    }
}
